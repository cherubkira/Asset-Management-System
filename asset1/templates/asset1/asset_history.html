{% extends "asset1/sidebar.html" %}

{% block page_content %}
<div class="p-4">
  <h2 class="text-2xl font-semibold mb-4">Asset History</h2>

  {% if history %}
  <div class="overflow-x-auto bg-white rounded shadow">
    <table class="min-w-full divide-y divide-gray-200">
      <thead class="bg-gray-800 text-white">
        <tr>
          <th class="py-2 px-3 text-left text-sm font-medium">Id</th>
          <th class="py-2 px-3 text-left text-sm font-medium">Asset</th>
          <th class="py-2 px-3 text-left text-sm font-medium">Requested Employee</th>
          <th class="py-2 px-3 text-left text-sm font-medium">Approved By</th>
          <th class="py-2 px-3 text-left text-sm font-medium">Status</th>
          <th class="py-2 px-3 text-left text-sm font-medium">Requested Date</th>
          <th class="py-2 px-3 text-left text-sm font-medium">Receive Date</th>
        </tr>
      </thead>
      <tbody class="bg-white divide-y divide-gray-200">
        {% for req in history %}
        <tr class="hover:bg-gray-100">
          <td class="py-2 px-3 text-sm">{{ req.id }}</td>
          <td class="py-2 px-3 text-sm">{{ req.asset }}</td>
          <td class="py-2 px-3 text-sm">{{ req.requester }}</td>
          <td class="py-2 px-3 text-sm">{{ req.approved_by }}</td>
          <td class="py-2 px-3 text-sm">
            {% if req.status == "Pending" %}
              <span class="px-2 py-1 rounded-full bg-yellow-200 text-yellow-800 text-xs font-semibold">{{ req.status }}</span>
            {% elif req.status == "Approved" %}
              <span class="px-2 py-1 rounded-full bg-green-200 text-green-800 text-xs font-semibold">{{ req.status }}</span>
            {% elif req.status == "Rejected" %}
              <span class="px-2 py-1 rounded-full bg-red-200 text-red-800 text-xs font-semibold">{{ req.status }}</span>
            {% else %}
              <span class="px-2 py-1 rounded-full bg-gray-200 text-gray-800 text-xs font-semibold">{{ req.status }}</span>
            {% endif %}
          </td>
          <td class="py-2 px-3 text-sm">{{ req.requested_at|date:"Y-m-d H:i" }}</td>
          <td class="py-2 px-3 text-sm">{{ req.receive_at }}</td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="7" class="py-4 px-3 text-center text-gray-500">No history found.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% else %}
    <p class="text-gray-500">No history found.</p>
  {% endif %}
</div>
{% endblock %}
